document.addEventListener("DOMContentLoaded", function() {
    // Toggle sidebar visibility
    var toggleButton = document.getElementById("toggleSidebar");
    var sidebar = document.querySelector(".sidebar");

    if (toggleButton && sidebar) {
        toggleButton.addEventListener("click", function() {
            sidebar.classList.toggle("hidden");
        });
    }

    // Handle message sending
    var sendButton = document.getElementById("sendMessage");
    var messageInput = document.getElementById("messageInput");
    var chatMessages = document.getElementById("chatMessages");

    if (sendButton && messageInput && chatMessages) {
        sendButton.addEventListener("click", sendMessage);
        messageInput.addEventListener("keydown", function(e) {
            if (e.key === "Enter" && !e.shiftKey) {
                e.preventDefault(); // Prevent newline
                sendMessage();
            }
        });

        function sendMessage() {
            var messageText = messageInput.value.trim();
            if (messageText) {
                var messageDiv = document.createElement("div");
                messageDiv.className = "message";

                var messageContent = document.createElement("div");
                messageContent.className = "message-content";
                messageContent.textContent = messageText;

                var timestamp = document.createElement("div");
                timestamp.className = "message-timestamp";
                var now = new Date();
                timestamp.textContent = now.toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit", hour12: true });

                messageDiv.appendChild(messageContent);
                messageDiv.appendChild(timestamp);
                chatMessages.appendChild(messageDiv);

                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // Clear input
                messageInput.value = "";
            }
        }
    }
});